// https://github.com/synesenom/mostrar v0.1.5 Copyright 2021 Enys Mones
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("js-yaml")):"function"==typeof define&&define.amd?define(["exports","d3-selection","js-yaml"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).mostrar={},null,t.jsyaml)}(this,(function(t,e,s){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(s);function l(t={}){const e={attributes:Object.assign({},t)},s={size:()=>Object.keys(e.attributes).length,_get:()=>e.attributes,apply:t=>(Object.entries(e.attributes).forEach((([e,s])=>t.attr(e,s))),t),diffTo:t=>l(Object.entries(t._get()).reduce(((t,[s,r])=>(r!==e.attributes[s]&&(t[s]=r),t)),{})),filter:t=>l(Object.entries(e.attributes).reduce(((e,[s,r])=>(r!==t.attr(s)&&(e[s]=r),e)),{})),names:()=>Object.keys(e.attributes).sort(),diff:(t,s)=>l(Object.entries(t._get()).reduce(((t,[r,n])=>(n===e.attributes[r]&&n===s.attr(r)||(t[r]=n),t)),{}))};return s}function i(t={}){const e={style:Object.assign({},t)},s={toString:()=>`Style{${Object.keys(e.style).sort().map((t=>`${t}: "${e.style[t]}"`)).join(", ")}}`,size:()=>Object.keys(e.style).length,_get:()=>e.style,apply:t=>(Object.entries(e.style).forEach((([e,s])=>t.style(e,s))),t),diffTo:t=>i(Object.entries(t._get()).reduce(((t,[s,r])=>(r!==e.style[s]&&(t[s]=r),t)),{})),filter:t=>i(Object.entries(e.style).reduce(((e,[s,r])=>(r!==t.style(s)&&(e[s]=r),e)),{})),names:()=>Object.keys(e.style).sort(),diff:(t,s)=>i(Object.entries(t._get()).reduce(((t,[r,n])=>(n===e.style[r]&&n===s.style(r)||(t[r]=n),t)),{}))};return s}function c(t={}){const e={attr:l(t.attr||{}),style:i(t.style||{}),delay:t.delay||0,duration:t.duration||0,selectors:t.selectors||[]},s={includes:(t=[])=>t.filter((t=>e.selectors.indexOf(t)>-1)).length>0,getAttributes:()=>e.attr,getStyle:()=>e.style};return s}function a(t=[],e){const s={transitions:t.map(c)},r={size:()=>s.transitions.length,collectAttributeNames:t=>s.transitions.filter((e=>e.includes(t))).map((t=>t.getAttributes().names())).flat().sort(),collectStyleNames:t=>s.transitions.filter((e=>e.includes(t))).map((t=>t.getStyle().names())).flat().sort()};return r}function o(t,e){const s={index:e,name:t.name,enter:a(t.enter),update:a(t.update),exit:a(t.exit)},r={collectAttributeNames:t=>[...s.enter.collectAttributeNames(t),...s.update.collectAttributeNames(t),...s.exit.collectAttributeNames(t)].sort(),collectStyleNames:t=>[...s.enter.collectStyleNames(t),...s.update.collectStyleNames(t),...s.exit.collectStyleNames(t)].sort()};return r}function u(t=[]){const e={frames:t.map(o)},s={collectAttributeNames:t=>e.frames.map((e=>e.collectAttributeNames(t))).flat().sort(),collectStyleNames:t=>e.frames.map((e=>e.collectStyleNames(t))).flat().sort()};return s}t.Scene=function(t){const e={frames:u(),current:0,objects:[]},s={init:async t=>{const r=await fetch(t).then((t=>t.text())),l=n.default.load(r);return e.frames=u(l),s}};return s},Object.defineProperty(t,"__esModule",{value:!0})}));
